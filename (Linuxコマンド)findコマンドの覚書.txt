# find コマンドの使い方

## 基本構文
find <検索開始ディレクトリ> <検索条件> <実行するアクション>

## 例：現在のディレクトリ内でのファイル検索
find . -name "file.txt"
- .: 現在のディレクトリから検索を開始
- -name "file.txt": 名前が "file.txt" と一致するファイルを検索

## 主なオプションと使い方

1. 名前で検索
- -name: ファイル名に一致するものを検索
  find . -name "*.txt"
  - *.txt という名前のファイルを検索

- -iname: 大文字小文字を区別せずに検索
  find . -iname "*.txt"

2. ファイルタイプで検索
- -type f: ファイルのみを検索
  find . -type f -name "*.txt"
  
- -type d: ディレクトリのみを検索
  find . -type d -name "docs"
  
- -type l: シンボリックリンクのみを検索
  find . -type l

3. サイズで検索
- -size: ファイルサイズで検索
  find . -size +100M
  - 100MBを超えるファイルを検索

4. 日時で検索
- -mtime: 最終更新時刻（日単位）
  find . -mtime -7
  - 最後の7日間に変更されたファイルを検索

- -atime: 最終アクセス時刻（時間単位）
  find . -atime +5

- -ctime: 最終変更時刻（状態変更、メタデータの変更など）
  find . -ctime -3

5. パーミッションで検索
- -perm: ファイルのパーミッションで検索
  find . -perm 644
  - パーミッションが644のファイルを検索

- -perm -777: 特定のパーミッションを持つファイルを検索（完全一致）
  find . -perm -777

6. 所有者やグループで検索
- -user: 特定のユーザーが所有するファイルを検索
  find . -user username

- -group: 特定のグループに所属するファイルを検索
  find . -group groupname

7. 実行するアクション
- -exec: 各検索結果に対してコマンドを実行
  find . -name "*.txt" -exec cat {} \;
  - cat コマンドで *.txt の内容を表示

- -print: 検索結果を表示（デフォルトで表示されるが、明示的に書くこともできる）
  find . -name "*.txt" -print

- -delete: 検索結果を削除
  find . -name "*.bak" -delete

## その他の便利なオプション

1. 複数条件で検索
- -and（省略可能）、-or、-not を使って複数条件で検索
  find . -name "*.txt" -or -name "*.md"
  - *.txt または *.md のファイルを検索

2. 最大検索深度
- -maxdepth: 検索の深さを制限
  find . -maxdepth 2 -name "*.txt"
  - 現在のディレクトリとその直下のディレクトリだけを検索

3. 最小検索深度
- -mindepth: 検索の最小深さを指定
  find . -mindepth 2 -name "*.txt"
  - 2階層目以上のディレクトリ内で *.txt を検索

4. 指定したディレクトリを検索対象から除外
- -prune: 指定したディレクトリを検索対象から除外
  find . -type d -name "exclude" -prune -o -name "*.txt" -print
  - "exclude" ディレクトリを除外し、それ以外で "*.txt" ファイルを検索

  **注意点:** `-prune` は直前の条件に対して作用します。つまり、検索条件で指定したディレクトリやファイルを対象から除外するためには、`-prune` を直前に使用し、次に続く `-o` で他の条件を指定する必要があります。

5. 複数の `-prune` を使った検索例
- 以下の例では、`exclude1` と `exclude2` というディレクトリを除外し、かつ `.txt` または `.md` ファイルを検索します。
  find . -type d \( -name "exclude1" -or -name "exclude2" \) -prune -o \( -name "*.txt" -or -name "*.md" \) -print
  - "exclude1" と "exclude2" ディレクトリを除外し、それ以外で "*.txt" または "*.md" ファイルを検索

- もう1つの例では、`exclude1`、`exclude2` だけでなく、`tmp` ディレクトリも除外して `.log` ファイルを検索します。
  find . \( -type d -name "exclude1" -or -name "exclude2" -or -name "tmp" \) -prune -o -name "*.log" -print
  - "exclude1"、"exclude2"、"tmp" ディレクトリを除外し、それ以外で "*.log" ファイルを検索
